/*!
 * @autofe/floornav v0.1.0
 * (c) 2018 Autohome Inc.
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t.AutoFE=t.AutoFE||{},t.AutoFE.Floornav=e(t.jQuery))}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e="floornav",i="fe.floornav",o="."+i,n=t.fn[e],s={SCROLL:"scroll"+o,RESIZE:"resize"+o,CLICK:"click"+o},r={DATA_TOGGLE:'[data-toggle="floornav"]',ITEM:"a[href]"};function a(e,i){var o=this;this.options=t.extend({},a.Default,i),this.$elem=t(e),this.$items=t(e).find(r.ITEM),this.targets=[],this.$items.each(function(e,i){o.targets.push(t(i.getAttribute("href")))});var n=t(i.container)[0];"BODY"!==n.tagName&&"HTML"!==n.tagName||(n=window),this.$container=t(n),this._$scroll=this.$container,n===window&&(this._$scroll=t("html,body")),this._timer=null,this.init()}function f(e,o){return this.each(function(){var n=t(this),s=n.data(i),r=t.extend({},a.Default,n.data(),"object"==typeof e&&e);if(s||(s=new a(this,r),n.data(i,s)),"string"==typeof e){if("undefined"==typeof s[e])throw new TypeError('No method named "'+e+'"');s[e](o)}})}return a.Default={container:window,base:"center",threshold:0,activeClass:"active"},a.prototype.init=function(){this._initJump(),this._initCheck(),this.check()},a.prototype.check=function(){var t=this.options.threshold,e=this.options.base,i=this.$container.scrollTop(),o=this.$container.height(),n=void 0,s=0;this.$container[0]!==window&&(s=this.$container.offset().top-i),n="top"===e?s+i:"bottom"==e?s+i+o:s+i+o/2,this.targets[0].offset().top<=n+t?this.$elem.fadeIn(500):this.$elem.fadeOut(500);for(var r=this.targets.length-1;r>=0;r--)if(this.targets[r].offset().top<=n+t){this._setItemActive(this.$items.eq(r));break}},a.prototype._initJump=function(){var e=this;this.$elem.on(s.CLICK,r.ITEM,function(i){i.preventDefault();var o=t(i.target),n=t(o.attr("href"));e._setItemActive(o),e._scrollTo(n)})},a.prototype._initCheck=function(){var t=this;this.$container.on(String(s.SCROLL)+","+String(s.RESIZE),function(){t._timer||(t._timer=setTimeout(function(){t.check(),clearTimeout(t._timer),t._timer=null},100))})},a.prototype._scrollTo=function(t){var e=this;this.$container.off(s.SCROLL),this.$container.off(s.RESIZE);var i=!1,o=0;this.$container[0]!==window&&(o=this.$container.offset().top-this.$container.scrollTop()),this._$scroll.stop().animate({scrollTop:t.offset().top-o},300,function(){i||(i=!0,e._initCheck())})},a.prototype._setItemActive=function(t){var e=this.options.activeClass;this.$items.removeClass(e),t.addClass(e)},t(function(){f.call(t(r.DATA_TOGGLE))}),t.fn[e]=f,t.fn[e].Constructor=a,t.fn[e].noConflict=function(){return t.fn[e]=n,f},a});