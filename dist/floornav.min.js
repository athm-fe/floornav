/*!
 * @autofe/floornav v0.1.1
 * (c) 2018 Autohome Inc.
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t.AutoFE=t.AutoFE||{},t.AutoFE.Floornav=e(t.jQuery))}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e="floornav",i="fe.floornav",o="."+i,n=t.fn[e],r={SCROLL:"scroll"+o,RESIZE:"resize"+o,CLICK:"click"+o},s={DATA_TOGGLE:'[data-toggle="floornav"]',ITEM:"a[href]"};function a(e,i){var o=this;this.options=t.extend({},a.Default,i),this.$elem=t(e),this.$items=t(e).find(s.ITEM),this.targets=[],this.$items.each(function(e,i){var n=t(i.getAttribute("href"));n&&n.length>0&&o.targets.push(n)});var n=t(i.container)[0];"BODY"!==n.tagName&&"HTML"!==n.tagName||(n=window),this.$container=t(n),this._$scroll=this.$container,n===window&&(this._$scroll=t("html,body")),this._timer=null,this.init()}function f(e,o){return this.each(function(){var n=t(this),r=n.data(i),s=t.extend({},a.Default,n.data(),"object"==typeof e&&e);if(r||(r=new a(this,s),n.data(i,r)),"string"==typeof e){if("undefined"==typeof r[e])throw new TypeError('No method named "'+e+'"');r[e](o)}})}return a.Default={container:window,base:"center",threshold:0,activeClass:"active"},a.prototype.init=function(){this._initJump(),this._initCheck(),this.check()},a.prototype.check=function(){var t=this.options.threshold,e=this.options.base,i=this.$container.scrollTop(),o=this.$container.height(),n=void 0,r=0;this.$container[0]!==window&&(r=this.$container.offset().top-i),n="top"===e?r+i:"bottom"==e?r+i+o:r+i+o/2,this.targets[0].offset().top<=n+t?this.$elem.fadeIn(500):this.$elem.fadeOut(500);for(var s=this.targets.length-1;s>=0;s--)if(this.targets[s].offset().top<=n+t){var a=this.targets[s].attr("id"),f=this.$elem.find('a[href="#'+String(a)+'"]');this._setItemActive(f);break}},a.prototype._initJump=function(){var e=this;this.$elem.on(r.CLICK,s.ITEM,function(i){i.preventDefault();var o=t(i.target),n=t(o.attr("href"));e._setItemActive(o),e._scrollTo(n)})},a.prototype._initCheck=function(){var t=this;this.$container.on(String(r.SCROLL)+","+String(r.RESIZE),function(){t._timer||(t._timer=setTimeout(function(){t.check(),clearTimeout(t._timer),t._timer=null},100))})},a.prototype._scrollTo=function(t){var e=this;if(t&&!(t.length<=0)){this.$container.off(r.SCROLL),this.$container.off(r.RESIZE);var i=!1,o=0;this.$container[0]!==window&&(o=this.$container.offset().top-this.$container.scrollTop()),this._$scroll.stop().animate({scrollTop:t.offset().top-o},300,function(){i||(i=!0,e._initCheck())})}},a.prototype._setItemActive=function(t){var e=this.options.activeClass;this.$items.removeClass(e),t.addClass(e)},t(function(){f.call(t(s.DATA_TOGGLE))}),t.fn[e]=f,t.fn[e].Constructor=a,t.fn[e].noConflict=function(){return t.fn[e]=n,f},a});